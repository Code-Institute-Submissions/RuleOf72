{% extends 'base.template.html' %}
{% block title %}
    {{lesson.topic}}'s discussion: {{discussion.title}}
{% endblock%}
{% block content %}
<div class="container mt-5 mb-5" id="all-lessons-container">
    <h1>{{lesson.topic}}'s discussion:</h1><h3> {{discussion.title}}</h3>
    <div class="card">
        {{discussion.content}}
    </div>
    <a href="{% url 'create_comment_route' lesson_id=lesson.id topic_id=discussion.id %}">Comment on this discussion!</a>
    {% for r in discussion.forum_comment_set.all %}
    <div class="card">
        <h3>{{r.title}}</h3>
        <hr class="my-4">
        <p>{{r.content}}</p>
        <hr class="my-4">
        <p>{{r.commenter}} commented on {{r.date_created}}
        {% if request.user == r.commenter %}
        <a href="{% url 'update_comment_route' lesson_id=lesson.id topic_id=discussion.id comment_id=r.id %}" class="btn create-btn">Edit</a>
        <a href="{% url 'delete_comment_route' lesson_id=lesson.id topic_id=discussion.id comment_id=r.id %}" class="btn delete-btn">Delete</a> 
        {%endif%}
    </div>
</div>
{%endfor%}
{%endblock%}